{"remainingRequest":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/src/views/page/system/role/Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/src/views/page/system/role/Role.vue","mtime":1568663656000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {RoleApi} from '@/api';\nimport RoleCreate from \"./RoleCreate\";\nimport RoleModify from \"./RoleModify\";\nimport RoleDetail from \"./RoleDetail\";\nimport RoleConfig from \"./RoleConfig\";\nimport {Information, InformationItem, Tips} from '@/components';\nimport {mapState} from 'vuex';\nimport Pagination from \"@/common/domain/Pagination\";\n\nlet role = {};\nlet roles = {};\n\nexport default {\n    name: \"Role\",\n    components: {Information, InformationItem, RoleCreate, RoleModify, RoleDetail, RoleConfig, Tips},\n    data() {\n        return {\n            role,\n            roles,\n            pagination: new Pagination(),\n            create: false,\n            modify: false,\n            config: false,\n            detail: false,\n            loading: false\n        }\n    },\n    computed: {\n        ...mapState({\n            user: state => state.account.user\n        })\n    },\n    mounted() {\n        this.getRoles();\n    },\n    methods: {\n        getRoles() {\n            this.loading = true;\n            RoleApi.get(this.pagination).then(res => {\n                this.roles = res;\n                this.loading = false;\n            });\n        },\n        deleteRole(ids) {\n            return RoleApi.delete(ids);\n        },\n        bindPressEnter(e) {\n            const value = e.target.value;\n            this.pagination.keyword = value;\n            if (value) this.getRoles();\n        },\n        bindClickDetail(role) {\n            this.detail = true;\n            this.role = role;\n        },\n        bindClickConfig(role) {\n            this.config = true;\n            this.role = role;\n        },\n        bindClickModify(role) {\n            this.modify = true;\n            this.role = role;\n        },\n        bindClickDelete(role) {\n            this.$confirm({\n                title: `确认删除 ${role.roleName} 吗`,\n                content: '此操作将永久删除角色且无法恢复，请谨慎操作！',\n                okType: 'danger',\n                onOk: () => this.deleteRole(role.roleId).then(() => {\n                    this.getRoles();\n                    this.$message.success(\"删除成功\");\n                }),\n            });\n        },\n        bindClickReset() {\n            if (this.pagination.keyword === null) return;\n\n            this.pagination.keyword = null;\n            this.getRoles();\n        }\n    },\n}\n",{"version":3,"sources":["Role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Role.vue","sourceRoot":"src/views/page/system/role","sourcesContent":["<template>\n    <a-card title=\"角色列表\" :bordered=\"false\" class=\"margin-bottom-lg\">\n\n        <template slot=\"extra\">\n            <a class=\"margin-right-sm\" @click=\"bindClickReset\">重置</a>\n            <a-input-search placeholder=\"请输入\" style=\"width: 256px;\"\n                            v-model=\"pagination.keyword\"\n                            @pressEnter=\"bindPressEnter\"/>\n        </template>\n\n        <a-button class=\"margin-bottom\" type=\"primary\" icon=\"plus\" @click=\"() => create = true\">新建</a-button>\n\n        <Tips showRefresh @refresh=\"getRoles\" :page=\"roles\" class=\"margin-bottom\"/>\n\n        <a-list :data-source=\"roles.records\" :loading=\"loading\" size=\"large\">\n            <a-list-item slot=\"renderItem\" slot-scope=\"item\">\n                <a-list-item-meta :description=\"item.roleDescription || '暂无描述'\">\n                    <template slot=\"title\">{{item.roleName}}</template>\n                    <a-avatar shape=\"square\" :size=\"48\" slot=\"avatar\"\n                              src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"/>\n                </a-list-item-meta>\n\n                <Information align=\"right\" :split=\"false\">\n                    <InformationItem title=\"最近修改\">\n                        <template slot=\"content\">{{item.roleModifyTime || '-'}}</template>\n                    </InformationItem>\n                    <InformationItem title=\"创建时间\">\n                        <template slot=\"content\">{{item.roleCreateTime}}</template>\n                    </InformationItem>\n                    <InformationItem title=\"状态\">\n                        <template slot=\"content\">\n                            <a-badge :status=\"item.roleStatus ? 'processing' : 'error'\"\n                                     :text=\"item.roleStatus ? '正常' : '禁用'\"/>\n                        </template>\n                    </InformationItem>\n                </Information>\n\n                <a slot=\"actions\" @click=\"bindClickDetail(item)\">查看</a>\n                <a slot=\"actions\" @click=\"bindClickConfig(item)\">配置</a>\n                <a-dropdown slot=\"actions\">\n                    <a>\n                        更多\n                        <a-icon type=\"down\"/>\n                    </a>\n                    <a-menu slot=\"overlay\">\n                        <a-menu-item>\n                            <a @click=\"bindClickModify(item)\">修改</a>\n                        </a-menu-item>\n                        <a-menu-item>\n                            <a @click=\"bindClickDelete(item)\">删除</a>\n                        </a-menu-item>\n                    </a-menu>\n                </a-dropdown>\n            </a-list-item>\n        </a-list>\n\n        <RoleCreate v-model=\"create\" @success=\"getRoles\"/>\n        <RoleModify v-model=\"modify\" @success=\"getRoles\" :role=\"role\"/>\n        <RoleConfig v-model=\"config\" @success=\"getRoles\" :role=\"role\"/>\n        <RoleDetail v-model=\"detail\" :role=\"role\"/>\n    </a-card>\n</template>\n\n<script>\n    import {RoleApi} from '@/api';\n    import RoleCreate from \"./RoleCreate\";\n    import RoleModify from \"./RoleModify\";\n    import RoleDetail from \"./RoleDetail\";\n    import RoleConfig from \"./RoleConfig\";\n    import {Information, InformationItem, Tips} from '@/components';\n    import {mapState} from 'vuex';\n    import Pagination from \"@/common/domain/Pagination\";\n\n    let role = {};\n    let roles = {};\n\n    export default {\n        name: \"Role\",\n        components: {Information, InformationItem, RoleCreate, RoleModify, RoleDetail, RoleConfig, Tips},\n        data() {\n            return {\n                role,\n                roles,\n                pagination: new Pagination(),\n                create: false,\n                modify: false,\n                config: false,\n                detail: false,\n                loading: false\n            }\n        },\n        computed: {\n            ...mapState({\n                user: state => state.account.user\n            })\n        },\n        mounted() {\n            this.getRoles();\n        },\n        methods: {\n            getRoles() {\n                this.loading = true;\n                RoleApi.get(this.pagination).then(res => {\n                    this.roles = res;\n                    this.loading = false;\n                });\n            },\n            deleteRole(ids) {\n                return RoleApi.delete(ids);\n            },\n            bindPressEnter(e) {\n                const value = e.target.value;\n                this.pagination.keyword = value;\n                if (value) this.getRoles();\n            },\n            bindClickDetail(role) {\n                this.detail = true;\n                this.role = role;\n            },\n            bindClickConfig(role) {\n                this.config = true;\n                this.role = role;\n            },\n            bindClickModify(role) {\n                this.modify = true;\n                this.role = role;\n            },\n            bindClickDelete(role) {\n                this.$confirm({\n                    title: `确认删除 ${role.roleName} 吗`,\n                    content: '此操作将永久删除角色且无法恢复，请谨慎操作！',\n                    okType: 'danger',\n                    onOk: () => this.deleteRole(role.roleId).then(() => {\n                        this.getRoles();\n                        this.$message.success(\"删除成功\");\n                    }),\n                });\n            },\n            bindClickReset() {\n                if (this.pagination.keyword === null) return;\n\n                this.pagination.keyword = null;\n                this.getRoles();\n            }\n        },\n    }\n</script>\n"]}]}
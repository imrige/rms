{"remainingRequest":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/src/utils/modules/request.js","dependencies":[{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/src/utils/modules/request.js","mtime":1568663656000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.is\";\nimport axios from 'axios';\nimport { notification } from 'ant-design-vue';\nimport store from \"@/store\";\nimport router from \"@/router\";\nvar LOGIN_PATH = \"/login\",\n    NOT_ALLOWED_PATH = \"/exception/403\",\n    NOT_FOUND_PATH = \"/exception/404\",\n    ERROR_SERVER_PATH = \"/exception/500\",\n    ERROR_REQUEST_PATH = \"/exception/400\";\nvar request = axios.create({\n  responseType: \"json\",\n  validateStatus: function validateStatus(status) {\n    return status === 200;\n  }\n});\nrequest.interceptors.request.use(function (config) {\n  var jwt = store.state.account.jwt || null; // let now = new Date().getTime(), expireTime = jwt ? jwt.expireTime : null;\n  // 过期时限为一天\n  // if (expireTime && now - expireTime > 0) router.push(NOT_ALLOWED_PATH);\n  // 如果存在Token就为添加到请求头里\n\n  if (jwt && jwt.token) config.headers.Authentication = jwt.token;\n  return config;\n}, function (err) {\n  return Promise.reject(err);\n});\nrequest.interceptors.response.use(function (res) {\n  return res;\n}, function (err) {\n  if (err && err.response) {\n    switch (err.response.status) {\n      case 400:\n        router.push(ERROR_REQUEST_PATH);\n        break;\n\n      case 401:\n        notification.error({\n          message: \"抱歉\",\n          description: \"登录超时或没有权限，无法访问资源，请尝试重新登录。\"\n        });\n        router.push(LOGIN_PATH);\n        break;\n\n      case 403:\n        router.push(NOT_ALLOWED_PATH);\n        break;\n\n      case 404:\n        router.push(NOT_FOUND_PATH);\n        break;\n\n      case 500:\n        router.push(ERROR_SERVER_PATH);\n        break;\n    }\n  }\n\n  return Promise.reject(err);\n});\nexport default {\n  // GET\n  get: function get(url, params) {\n    var _params;\n\n    if (Object.is(params, undefined)) _params = '';else {\n      _params = '?';\n\n      for (var key in params) {\n        if (params.hasOwnProperty(key) && params[key] !== null) _params += \"\".concat(key, \"=\").concat(params[key], \"&\");\n      }\n\n      _params = _params.slice(0, _params.length - 1);\n    }\n    return request.get(\"\".concat(url).concat(_params));\n  },\n  // POST\n  post: function post(url, params) {\n    return request.post(url, params, {\n      transformRequest: [function (params) {\n        var result = '';\n        if (!params) return;\n        Object.keys(params).forEach(function (key) {\n          if (!Object.is(params[key], undefined) && !Object.is(params[key], null)) result += encodeURIComponent(key) + '=' + encodeURIComponent(params[key]) + '&';\n        });\n        return result;\n      }]\n    });\n  },\n  // PUT\n  put: function put(url, params) {\n    return request.put(url, params, {\n      transformRequest: [function (params) {\n        var result = '';\n        Object.keys(params).forEach(function (key) {\n          if (!Object.is(params[key], undefined) && !Object.is(params[key], null)) {\n            result += encodeURIComponent(key) + '=' + encodeURIComponent(params[key]) + '&';\n          }\n        });\n        return result;\n      }],\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n  },\n  // DELETE\n  delete: function _delete(url, params) {\n    var _params;\n\n    if (Object.is(params, undefined)) _params = '';else {\n      _params = '?';\n\n      for (var key in params) {\n        if (params.hasOwnProperty(key) && params[key] !== null) _params += \"&\".concat(key, \"=\").concat(params[key]);\n      }\n\n      _params = _params.replace(\"&\", \"\");\n    }\n    return request.delete(\"\".concat(url).concat(_params));\n  }\n};",{"version":3,"sources":["/Users/rige/Desktop/Workbench/github/rms/rms_web_vue/src/utils/modules/request.js"],"names":["axios","notification","store","router","LOGIN_PATH","NOT_ALLOWED_PATH","NOT_FOUND_PATH","ERROR_SERVER_PATH","ERROR_REQUEST_PATH","request","create","responseType","validateStatus","status","interceptors","use","config","jwt","state","account","token","headers","Authentication","err","Promise","reject","response","res","push","error","message","description","get","url","params","_params","Object","is","undefined","key","hasOwnProperty","slice","length","post","transformRequest","result","keys","forEach","encodeURIComponent","put","delete","replace"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {notification} from 'ant-design-vue';\n\nimport store from \"@/store\";\nimport router from \"@/router\";\n\n\nlet LOGIN_PATH = \"/login\",\n    NOT_ALLOWED_PATH = \"/exception/403\",\n    NOT_FOUND_PATH = \"/exception/404\",\n    ERROR_SERVER_PATH = \"/exception/500\",\n    ERROR_REQUEST_PATH = \"/exception/400\";\n\nconst request = axios.create({\n    responseType: \"json\",\n    validateStatus: (status => {\n        return status === 200;\n    })\n});\n\n\nrequest.interceptors.request.use(\n    config => {\n        let jwt = store.state.account.jwt || null;\n        // let now = new Date().getTime(), expireTime = jwt ? jwt.expireTime : null;\n        // 过期时限为一天\n        // if (expireTime && now - expireTime > 0) router.push(NOT_ALLOWED_PATH);\n        // 如果存在Token就为添加到请求头里\n        if (jwt && jwt.token) config.headers.Authentication = jwt.token;\n\n        return config;\n    }, err => {\n        return Promise.reject(err);\n    }\n);\n\nrequest.interceptors.response.use(\n    res => {\n        return res;\n    },\n    err => {\n        if (err && err.response) {\n            switch (err.response.status) {\n                case 400:\n                    router.push(ERROR_REQUEST_PATH);\n                    break;\n                case 401:\n                    notification.error({\n                        message: \"抱歉\",\n                        description: \"登录超时或没有权限，无法访问资源，请尝试重新登录。\"\n                    });\n                    router.push(LOGIN_PATH);\n                    break;\n                case 403:\n                    router.push(NOT_ALLOWED_PATH);\n                    break;\n                case 404:\n                    router.push(NOT_FOUND_PATH);\n                    break;\n                case 500:\n                    router.push(ERROR_SERVER_PATH);\n                    break;\n            }\n        }\n\n        return Promise.reject(err);\n    }\n);\n\nexport default {\n    // GET\n    get(url, params) {\n        let _params;\n        if (Object.is(params, undefined)) _params = '';\n        else {\n            _params = '?';\n            for (let key in params) {\n                if (params.hasOwnProperty(key) && params[key] !== null) _params += `${key}=${params[key]}&`;\n            }\n            _params = _params.slice(0, _params.length - 1);\n        }\n\n        return request.get(`${url}${_params}`);\n    },\n    // POST\n    post(url, params) {\n        return request.post(url, params, {\n            transformRequest: [\n                params => {\n                    let result = '';\n                    if (!params) return;\n                    Object.keys(params).forEach(key => {\n                        if (!Object.is(params[key], undefined) && !Object.is(params[key], null)) result += encodeURIComponent(key) + '=' + encodeURIComponent(params[key]) + '&';\n                    });\n                    return result;\n                }\n            ]\n        });\n    },\n    // PUT\n    put(url, params) {\n        return request.put(url, params, {\n            transformRequest: [(params) => {\n                let result = '';\n                Object.keys(params).forEach((key) => {\n                    if (!Object.is(params[key], undefined) && !Object.is(params[key], null)) {\n                        result += encodeURIComponent(key) + '=' + encodeURIComponent(params[key]) + '&'\n                    }\n                });\n                return result\n            }],\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        });\n    },\n    // DELETE\n    delete(url, params) {\n        let _params;\n        if (Object.is(params, undefined)) _params = '';\n        else {\n            _params = '?';\n            for (let key in params) {\n                if (params.hasOwnProperty(key) && params[key] !== null) _params += `&${key}=${params[key]}`;\n            }\n            _params = _params.replace(\"&\", \"\");\n        }\n        return request.delete(`${url}${_params}`);\n    }\n};\n"]}]}